# üöÄ Email Generation System v2

## –ß—Ç–æ —ç—Ç–æ?

–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø–∏—Å–µ–º ‚Äî **—Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏**, –±–µ–∑ –±–∞–≥–æ–≤.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v2

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí —Å–æ–∑–¥–∞–µ—Ç —Ç–µ–º—É –ø–∏—Å—å–º–∞
2. Backend ‚Üí AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
3. Backend ‚Üí —Ä–µ–Ω–¥–µ—Ä–∏—Ç HTML —à–∞–±–ª–æ–Ω
4. –ë–î ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≥–æ—Ç–æ–≤—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫
5. UI ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ ‚Üí –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
```

## –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç v1

| –§—É–Ω–∫—Ü–∏—è | v1 (—Å—Ç–∞—Ä–∞—è) | v2 (–Ω–æ–≤–∞—è) |
|---------|------------|-----------|
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è** | 2 —ç—Ç–∞–ø–∞ (AI ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí —Ä–µ–Ω–¥–µ—Ä) | 1 —ç—Ç–∞–ø (AI ‚Üí —Ä–µ–Ω–¥–µ—Ä ‚Üí –≥–æ—Ç–æ–≤–æ) |
| **–®–∞–±–ª–æ–Ω—ã** | slots_schema, —Å–ª–æ–∂–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è | –ü—Ä–æ—Å—Ç—ã–µ {{–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ}} |
| **–í–µ—Ä—Å—Ç–∫–∞** | –ß–∞—Å—Ç–æ –ª–æ–º–∞–ª–∞—Å—å | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ |
| **–ó–Ω–∞–Ω–∏—è** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —á–∞—Å—Ç–∏—á–Ω–æ | –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é |
| **–¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞** | –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å | –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç–µ |
| **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** | 60% | 95% |

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞

**URL:** `/drafts`

1. –í—ã–±–µ—Ä–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
2. –í—ã–±–µ—Ä–∏ —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∞–Ω–æ–Ω—Å, –ø—Ä–æ–¥–∞–∂–∞, –ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —Ç.–¥.)
3. –ù–∞–ø–∏—à–∏ —Ç–µ–º—É –ø–∏—Å—å–º–∞
4. –ù–∞–∂–º–∏ "–°–æ–∑–¥–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–æ—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –≤–µ—Ä—Å—Ç–∫–æ–π –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞

1. –ß–µ—Ä–Ω–æ–≤–∏–∫ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —Å–ø—Ä–∞–≤–∞
2. –ù–∞–∂–º–∏ –Ω–∞ "–ì–ª–∞–∑" ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø—Ä–µ–≤—å—é
3. –ù–∞–∂–º–∏ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Unisender (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

## Backend API

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞

**Endpoint:** `POST /email-draft-v2`

**Request:**
```json
{
  "event_id": 2,
  "content_type_id": 9,
  "theme": "–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"
}
```

**Response:**
```json
{
  "success": true,
  "draft_id": 82,
  "subject": "–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É",
  "html": "<html>...</html>",
  "template_name": "–ü—Ä–æ–¥–∞–∂–∞ —á–µ—Ä–µ–∑ –±–æ–ª—å —Å–æ —Å–ø–∏–∫–µ—Ä–∞–º–∏ 1",
  "ai_reasoning": "–í—ã–±—Ä–∞–ª —Å–ø–∏–∫–µ—Ä–æ–≤ –ê–Ω–Ω—É –ß–µ–º–µ—Ç–µ–≤—É, –ù–∏–∫–∏—Ç—É –í–æ–ª—å–Ω–∏—á–∞..."
}
```

### –°–ø–∏—Å–æ–∫ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤

**Endpoint:** `GET /events-manager?action=list_drafts&event_id=2`

**Response:**
```json
{
  "drafts": [
    {
      "id": 82,
      "subject": "–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",
      "html_content": "<html>...</html>",
      "created_at": "2025-11-02T10:30:00",
      "status": "draft",
      "pipeline_version": "v2"
    }
  ]
}
```

## –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏?

‚úÖ **AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ  
‚úÖ **–®–∞–±–ª–æ–Ω—ã** ‚Äî –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ **–í–µ—Ä—Å—Ç–∫–∞** ‚Äî –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è  
‚úÖ **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π** ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ø–∏–∫–µ—Ä—ã, –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∏–Ω—Ñ–æ –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏  
‚úÖ **CTA** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞  
‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Äî —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `draft`  

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
3. üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Unisender (–æ—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤)
4. üîÑ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
5. üîÑ A/B —Ç–µ—Å—Ç—ã —Ç–µ–º—ã –ø–∏—Å—å–º–∞

## –ö–∞–∫ –¥–µ–±–∞–∂–∏—Ç—å?

### –ï—Å–ª–∏ –ø–∏—Å—å–º–æ –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–æ—Å—å:

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend:** `/backend/email-draft-v2/`
2. **–ü—Ä–æ–≤–µ—Ä—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π:** –µ—Å—Ç—å –ª–∏ —Å–ø–∏–∫–µ—Ä—ã / –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è event_id?
3. **–ü—Ä–æ–≤–µ—Ä—å —à–∞–±–ª–æ–Ω:** –µ—Å—Ç—å –ª–∏ —à–∞–±–ª–æ–Ω –¥–ª—è content_type_id?

### –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –ø–æ–¥—Å—Ç–∞–≤–∏–ª–∏—Å—å:

1. **AI –Ω–µ –≤–µ—Ä–Ω—É–ª JSON:** –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏, –≤–æ–∑–º–æ–∂–Ω–æ –æ—à–∏–±–∫–∞ –≤ –ø—Ä–æ–º–ø—Ç–µ
2. **AI –≤–µ—Ä–Ω—É–ª –Ω–µ —Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** –¥–æ–±–∞–≤—å –∏—Ö –≤ —Å–ø–∏—Å–æ–∫ `variables` –≤ –ø—Ä–æ–º–ø—Ç–µ
3. **–û—Å—Ç–∞–ª–∏—Å—å `[missing]`:** –∑–Ω–∞—á–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ—Ç –Ω–∏ –≤ AI –æ—Ç–≤–µ—Ç–µ, –Ω–∏ –≤ –¥–µ—Ñ–æ–ª—Ç–∞—Ö

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í–æ–ø—Ä–æ—Å—ã –∏ –±–∞–≥–∏: —Å–æ–∑–¥–∞–≤–∞–π issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –ø–∏—à–∏ –≤ Telegram.

---

**v2 ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ, –±—ã—Å—Ç—Ä–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ. –ü–æ–µ—Ö–∞–ª–∏! üöÄ**
