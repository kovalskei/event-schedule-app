# üß© –°–∏—Å—Ç–µ–º–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –±–ª–æ–∫–æ–≤ v2

## –ü—Ä–æ–±–ª–µ–º–∞ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

**–ë—ã–ª–æ:**
```html
<h2>{{speaker_title}}</h2>
<p>{{speaker_name}}</p>
<p>{{speaker_topic}}</p>
```

‚ùå –°–ª–∏—à–∫–æ–º –¥–µ—Ç–∞–ª—å–Ω–æ ‚Äî –ò–ò –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç  
‚ùå –ù–µ—Ç —Å–≤—è–∑–∏ —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π  
‚ùå –ù–µ—Ç –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω—ã –ø–∏—Å—å–º–∞  

---

## –†–µ—à–µ–Ω–∏–µ: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏

**–°—Ç–∞–ª–æ:**
```
üß© –ë–õ–û–ö: speakers_section
üìö –ò—Å—Ç–æ—á–Ω–∏–∫: program (–±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π)
üí° –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: "–ù–∞–π–¥–∏ –≤—Å–µ—Ö —Å–ø–∏–∫–µ—Ä–æ–≤ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ —Å–æ–±—ã—Ç–∏—è. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–≤–ª–µ–∫–∏: –§–ò–û, –∫–æ–º–ø–∞–Ω–∏—é, —Ç–µ–º—É"
üìã –°—Ö–µ–º–∞: {speakers: [{name, company, topic}]}
```

‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞  
‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (program, pain, content_plan)  
‚úÖ –ò–ò –≤–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É  

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 1Ô∏è‚É£ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `template_blocks`

```sql
CREATE TABLE template_blocks (
    id SERIAL PRIMARY KEY,
    template_id INTEGER,
    block_type VARCHAR(100),     -- intro_with_pain, speakers_list, schedule_table
    block_name VARCHAR(255),      -- intro_with_pain_1, speakers_list_1
    html_content TEXT,            -- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π HTML –±–ª–æ–∫–∞
    block_order INTEGER,          -- –ü–æ—Ä—è–¥–æ–∫ –±–ª–æ–∫–æ–≤ –≤ –ø–∏—Å—å–º–µ
    
    -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    knowledge_source VARCHAR(100), -- program, pain, style, content_plan
    generation_instructions TEXT,  -- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò
    example_content TEXT,          -- –ü—Ä–∏–º–µ—Ä –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
    data_schema JSONB              -- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–∞
);
```

### 2Ô∏è‚É£ Backend: `analyze-template-v2`

**URL:** `https://functions.poehali.dev/43abb32b-2387-4899-8e13-85b90879ce0c`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü–∞—Ä—Å–∏—Ç HTML –ø–∏—Å—å–º–∞
- –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –±–ª–æ–∫–∏ –ø–æ —Å–µ–º–∞–Ω—Ç–∏–∫–µ
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö (program/pain/content_plan)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ö–µ–º—É –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
POST /analyze-template-v2
{
  "html_content": "<h1>–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é...</h1>..."
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "blocks": [
    {
      "block_type": "intro_with_pain",
      "block_name": "intro_with_pain_1",
      "html_content": "<h1>...</h1><p>–ù–∞–¥–æ–µ–ª–æ —Ç—Ä–∞—Ç–∏—Ç—å –º–µ—Å—è—Ü—ã –Ω–∞ –Ω–∞–π–º?</p>",
      "knowledge_source": "pain,content_plan",
      "generation_instructions": "–°–æ–∑–¥–∞–π –ø—Ä–∏–≤–ª–µ–∫–∞—é—â–∏–π –∑–∞—Ö–æ–¥. –ò—Å–ø–æ–ª—å–∑—É–π –±–æ–ª–∏ –¶–ê –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (pain), —É–ø–æ–º—è–Ω–∏ —Ç–µ–º—É –∏–∑ –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω–∞.",
      "data_schema": {
        "hook_text": "str",
        "event_theme": "str",
        "pain_points": ["str"]
      }
    },
    {
      "block_type": "speakers_list",
      "block_name": "speakers_list_1",
      "html_content": "<div><h3>–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</h3>...</div>",
      "knowledge_source": "program",
      "generation_instructions": "–ù–∞–π–¥–∏ –≤—Å–µ—Ö —Å–ø–∏–∫–µ—Ä–æ–≤ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ —Å–æ–±—ã—Ç–∏—è. –î–ª—è –∫–∞–∂–¥–æ–≥–æ: –§–ò–û, –∫–æ–º–ø–∞–Ω–∏—é, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, —Ç–µ–º—É.",
      "data_schema": {
        "speakers": [
          {
            "name": "str",
            "company": "str",
            "position": "str",
            "topic": "str"
          }
        ]
      }
    }
  ],
  "blocks_count": 7
}
```

### 3Ô∏è‚É£ Backend: `fill-template-v2`

**URL:** `https://functions.poehali.dev/4d1e870e-39a9-4f8d-a9ca-b17f9811a585`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –±–ª–æ–∫–∏ –∏–∑ –ë–î
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- –í—ã–∑—ã–≤–∞–µ—Ç OpenAI GPT-4o-mini —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –†–µ–Ω–¥–µ—Ä–∏—Ç HTML —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –°–æ–±–∏—Ä–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
POST /fill-template-v2
{
  "template_id": 1,
  "event_id": 1,
  "theme": "–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –≤–µ–±–∏–Ω–∞—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "filled_html": "<html><body>...</body></html>",
  "blocks_data": {
    "intro_with_pain_1": {
      "hook_text": "–¢—Ä–∞—Ç–∏—Ç–µ –º–µ—Å—è—Ü—ã –Ω–∞ –ø–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤?",
      "event_theme": "–í–µ–±–∏–Ω–∞—Ä: –ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ",
      "pain_points": ["–î–æ–ª–≥–∏–π –Ω–∞–π–º", "–ù–∏–∑–∫–∏–π –æ—Ç–∫–ª–∏–∫"]
    },
    "speakers_list_1": {
      "speakers": [
        {
          "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
          "company": "–Ø–Ω–¥–µ–∫—Å",
          "position": "–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É",
          "topic": "–ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ: –æ—Ç —Ä–µ–∑—é–º–µ –¥–æ –æ—Ñ—Ñ–µ—Ä–∞"
        }
      ]
    }
  },
  "blocks_count": 7
}
```

---

## üéØ –¢–∏–ø—ã —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –±–ª–æ–∫–æ–≤

### 1. `intro_with_pain`
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `pain, content_plan`  
**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–æ–∑–¥–∞–π –ø—Ä–∏–≤–ª–µ–∫–∞—é—â–∏–π –∑–∞—Ö–æ–¥ –ø–∏—Å—å–º–∞. –ò—Å–ø–æ–ª—å–∑—É–π –±–æ–ª–∏ –¶–ê –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π, —É–ø–æ–º—è–Ω–∏ —Ç–µ–º—É –∏–∑ –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω–∞.

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "hook_text": "str",
  "event_theme": "str",
  "pain_points": ["str"]
}
```

**–ü—Ä–∏–º–µ—Ä:**
```html
<!-- –û—Ä–∏–≥–∏–Ω–∞–ª -->
<h1>–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –Ω–∞ –≤–µ–±–∏–Ω–∞—Ä!</h1>
<p>–ù–∞–¥–æ–µ–ª–æ —Ç—Ä–∞—Ç–∏—Ç—å –º–µ—Å—è—Ü—ã –Ω–∞ –Ω–∞–π–º? –ú—ã –ø–æ–º–æ–∂–µ–º!</p>

<!-- –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
<h1>–í–µ–±–∏–Ω–∞—Ä: –ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ</h1>
<p>–¢—Ä–∞—Ç–∏—Ç–µ –º–µ—Å—è—Ü—ã –Ω–∞ –ø–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤? –£—Å—Ç–∞–ª–∏ –æ—Ç –Ω–∏–∑–∫–æ–≥–æ –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏–∏? –£–∑–Ω–∞–π—Ç–µ –∫–∞–∫ –ò–ò —Å–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –Ω–∞–π–º–∞ –≤ 3 —Ä–∞–∑–∞!</p>
```

---

### 2. `speakers_list`
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `program`  
**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –ù–∞–π–¥–∏ –≤—Å–µ—Ö —Å–ø–∏–∫–µ—Ä–æ–≤ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ —Å–æ–±—ã—Ç–∏—è. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–≤–ª–µ–∫–∏: –§–ò–û, –∫–æ–º–ø–∞–Ω–∏—é, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, —Ç–µ–º—É –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è.

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "speakers": [
    {
      "name": "str",
      "company": "str",
      "position": "str",
      "topic": "str",
      "photo_url": "str?"
    }
  ]
}
```

**–ü—Ä–∏–º–µ—Ä –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (program):**
```
–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤, –î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É, –Ø–Ω–¥–µ–∫—Å
–¢–µ–º–∞: –ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ: –æ—Ç —Ä–µ–∑—é–º–µ –¥–æ –æ—Ñ—Ñ–µ—Ä–∞

–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞, HR Tech Lead, Ozon
–¢–µ–º–∞: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è HR –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ API
```

**–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
```html
<div>
  <h3>–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</h3>
  <p>–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É, –Ø–Ω–¥–µ–∫—Å</p>
  <p>–¢–µ–º–∞: –ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ: –æ—Ç —Ä–µ–∑—é–º–µ –¥–æ –æ—Ñ—Ñ–µ—Ä–∞</p>
</div>
<div>
  <h3>–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞</h3>
  <p>HR Tech Lead, Ozon</p>
  <p>–¢–µ–º–∞: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è HR –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ API</p>
</div>
```

---

### 3. `schedule_table`
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `program`  
**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –ò–∑–≤–ª–µ–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞: –≤—Ä–µ–º—è, –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã, —Å–ø–∏–∫–µ—Ä.

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "schedule": [
    {
      "time": "str",
      "title": "str",
      "speaker": "str?",
      "description": "str?"
    }
  ]
}
```

---

### 4. `pain_elaboration`
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `pain`  
**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –í–æ–∑—å–º–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –±–æ–ª–∏ –¶–ê –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –∏—Ö –≤ —Ç–µ–∫—Å—Ç–µ –ø–æ —Å—Ç–∏–ª—é –ø—Ä–∏–º–µ—Ä–∞.

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "pain_list": ["str"],
  "pain_description": "str"
}
```

---

### 5. `benefits_section`
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `program, content_plan`  
**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –û–ø–∏—à–∏ —á—Ç–æ –ø–æ–ª—É—á–∞—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∏. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–µ–º—ã –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ —Ü–µ–ª–∏ —Å–æ–±—ã—Ç–∏—è.

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "benefits": ["str"],
  "outcomes": ["str"]
}
```

---

### 6. `cta_button`
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `style`  
**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–æ–∑–¥–∞–π –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é. –ö–æ–ø–∏—Ä—É–π —Å—Ç–∏–ª—å –∫–Ω–æ–ø–∫–∏ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞. –¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å.

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "cta_text": "str",
  "button_url": "str",
  "urgency": "str?"
}
```

---

## üîÑ Workflow

### –®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç HTML

```html
<h1>–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é HR Tech</h1>
<p>–ù–∞–¥–æ–µ–ª–æ —Ç—Ä–∞—Ç–∏—Ç—å –º–µ—Å—è—Ü—ã –Ω–∞ –Ω–∞–π–º?</p>

<div>
  <h2>–ù–∞—à–∏ —ç–∫—Å–ø–µ—Ä—Ç—ã</h2>
  <div>
    <h3>–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</h3>
    <p>–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É, –Ø–Ω–¥–µ–∫—Å</p>
  </div>
</div>

<table>
  <tr><td>10:00</td><td>–û—Ç–∫—Ä—ã—Ç–∏–µ</td></tr>
  <tr><td>11:00</td><td>–ü–∞–Ω–µ–ª—å–Ω–∞—è –¥–∏—Å–∫—É—Å—Å–∏—è</td></tr>
</table>

<a href="#">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
```

### –®–∞–≥ 2: –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ –±–ª–æ–∫–∏

```
üß© –ë–õ–û–ö 1: intro_with_pain
   üìö –ò—Å—Ç–æ—á–Ω–∏–∫: pain, content_plan
   üìÑ HTML: <h1>...</h1><p>–ù–∞–¥–æ–µ–ª–æ...</p>

üß© –ë–õ–û–ö 2: speakers_list
   üìö –ò—Å—Ç–æ—á–Ω–∏–∫: program
   üìÑ HTML: <div><h3>–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</h3>...</div>

üß© –ë–õ–û–ö 3: schedule_table
   üìö –ò—Å—Ç–æ—á–Ω–∏–∫: program
   üìÑ HTML: <table>...</table>

üß© –ë–õ–û–ö 4: cta_button
   üìö –ò—Å—Ç–æ—á–Ω–∏–∫: style
   üìÑ HTML: <a href="#">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
```

### –®–∞–≥ 3: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –ò–ò –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–ë–ª–æ–∫: speakers_list**

```
–¢–´ ‚Äî –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä email-—Ä–∞—Å—Å—ã–ª–æ–∫.

–ë–õ–û–ö: speakers_list
–ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ù–∞–π–¥–∏ –≤—Å–µ—Ö —Å–ø–∏–∫–µ—Ä–æ–≤ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ —Å–æ–±—ã—Ç–∏—è

–ë–ê–ó–ê –ó–ù–ê–ù–ò–ô (program):
–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤, –î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É, –Ø–Ω–¥–µ–∫—Å
–¢–µ–º–∞: –ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ

–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞, HR Tech Lead, Ozon
–¢–µ–º–∞: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è HR

–ü–†–ò–ú–ï–† –ö–û–ù–¢–ï–ù–¢–ê:
–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤, –î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É, –Ø–Ω–¥–µ–∫—Å

–í–ï–†–ù–ò JSON:
{
  "speakers": [
    {"name": "...", "company": "...", "topic": "..."}
  ]
}
```

### –®–∞–≥ 4: –ò–ò –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ

```json
{
  "speakers": [
    {
      "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
      "company": "–Ø–Ω–¥–µ–∫—Å",
      "position": "–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É",
      "topic": "–ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ: –æ—Ç —Ä–µ–∑—é–º–µ –¥–æ –æ—Ñ—Ñ–µ—Ä–∞"
    },
    {
      "name": "–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞",
      "company": "Ozon",
      "position": "HR Tech Lead",
      "topic": "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è HR –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"
    }
  ]
}
```

### –®–∞–≥ 5: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç HTML

```html
<div>
  <h2>–ù–∞—à–∏ —ç–∫—Å–ø–µ—Ä—Ç—ã</h2>
  <div>
    <h3>–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</h3>
    <p>–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É, –Ø–Ω–¥–µ–∫—Å</p>
    <p>–¢–µ–º–∞: –ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ: –æ—Ç —Ä–µ–∑—é–º–µ –¥–æ –æ—Ñ—Ñ–µ—Ä–∞</p>
  </div>
  <div>
    <h3>–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞</h3>
    <p>HR Tech Lead, Ozon</p>
    <p>–¢–µ–º–∞: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è HR –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</p>
  </div>
</div>
```

### –®–∞–≥ 6: –§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ

–í—Å–µ –±–ª–æ–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ –ø–∏—Å—å–º–æ:
```html
<html>
<body>
  <!-- –ë–õ–û–ö 1: intro_with_pain -->
  <h1>–í–µ–±–∏–Ω–∞—Ä: –ò–ò –≤ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ</h1>
  <p>–¢—Ä–∞—Ç–∏—Ç–µ –º–µ—Å—è—Ü—ã –Ω–∞ –ø–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤? –£–∑–Ω–∞–π—Ç–µ –∫–∞–∫ –ò–ò —Å–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –Ω–∞–π–º–∞ –≤ 3 —Ä–∞–∑–∞!</p>
  
  <!-- –ë–õ–û–ö 2: speakers_list -->
  <div>
    <h2>–ù–∞—à–∏ —ç–∫—Å–ø–µ—Ä—Ç—ã</h2>
    <div><h3>–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</h3>...</div>
    <div><h3>–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞</h3>...</div>
  </div>
  
  <!-- –ë–õ–û–ö 3: schedule_table -->
  <table>...</table>
  
  <!-- –ë–õ–û–ö 4: cta_button -->
  <a href="#">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ</a>
</body>
</html>
```

---

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ `/templates`

**–ö–Ω–æ–ø–∫–∞:** üß© –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞:
  - –¢–∏–ø –±–ª–æ–∫–∞ (intro_with_pain, speakers_list)
  - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö (program, pain, content_plan)
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò
  - –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  - –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö (JSON)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –í–∏–¥–Ω–æ **–ß–¢–û** –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –ò–ò
- –í–∏–¥–Ω–æ **–û–¢–ö–£–î–ê** –±–µ—Ä—É—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
- –í–∏–¥–Ω–æ **–ö–ê–ö** –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ä–∞—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ) | –ù–æ–≤–∞—è (–±–ª–æ–∫–∏) |
|----------|---------------------|---------------|
| –ì—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—å | –°–ª–∏—à–∫–æ–º –¥–µ—Ç–∞–ª—å–Ω–æ | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –ù–µ—Ç | –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç |
| –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π | –ù–µ —Å–≤—è–∑–∞–Ω–∞ | –ü—Ä—è–º–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ |
| –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ò–ò | –û–±—â–∏–µ | –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –±–ª–æ–∫–∞ |
| –¢–æ—á–Ω–æ—Å—Ç—å | 70% | 90%+ |
| –ü—Ä–∏–º–µ—Ä | `{{speaker_name}}` | `speakers_list ‚Üí program` |

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å HTML –≤ `/templates`

### 2. –ù–∞–∂–∞—Ç—å "üß© –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑"

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –†–∞–∑–æ–±—å—ë—Ç –ø–∏—Å—å–º–æ –Ω–∞ –±–ª–æ–∫–∏
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–∏–ø –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞
- –ü—Ä–∏–≤—è–∂–µ—Ç –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–∫–∞–∂–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò

### 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–ª–æ–∫–∏ –≤ –ë–î

```sql
INSERT INTO template_blocks (template_id, block_type, html_content, ...)
VALUES (1, 'speakers_list', '<div>...</div>', ...);
```

### 4. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Å—å–º–∞ —á–µ—Ä–µ–∑ API

```bash
POST /fill-template-v2
{
  "template_id": 1,
  "event_id": 1,
  "theme": "–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –≤–µ–±–∏–Ω–∞—Ä"
}
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –±–ª–æ–∫–æ–≤

```python
def classify_block(text: str, html: str):
    text_lower = text.lower()
    
    # Intro —Å –±–æ–ª—è–º–∏
    if '–ø—Ä–∏–≤–µ—Ç' in text_lower and '–ø—Ä–æ–±–ª–µ–º' in text_lower:
        return 'intro_with_pain', 'pain,content_plan'
    
    # –°–ø–∏–∫–µ—Ä—ã
    if '—Å–ø–∏–∫–µ—Ä' in text_lower and html.count('<div') > 2:
        return 'speakers_list', 'program'
    
    # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
    if '–ø—Ä–æ–≥—Ä–∞–º–º–∞' in text_lower and html.count('<tr') > 1:
        return 'schedule_table', 'program'
    
    # ... –µ—â—ë 10 —Ç–∏–ø–æ–≤
```

### –ü—Ä–æ–º–ø—Ç –¥–ª—è –ò–ò

```python
prompt = f"""
–¢—ã ‚Äî –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä email-—Ä–∞—Å—Å—ã–ª–æ–∫.

–ë–õ–û–ö: {block_type}
–ò–ù–°–¢–†–£–ö–¶–ò–Ø: {generation_instructions}

–ë–ê–ó–ê –ó–ù–ê–ù–ò–ô ({knowledge_source}):
{knowledge_text}

–¢–ï–ú–ê –ü–ò–°–¨–ú–ê: {theme}

–ü–†–ò–ú–ï–† –ö–û–ù–¢–ï–ù–¢–ê:
{example_content}

–°–•–ï–ú–ê –î–ê–ù–ù–´–•:
{json.dumps(data_schema)}

–í–ï–†–ù–ò JSON –ü–û –°–•–ï–ú–ï.
"""
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏

- **–í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞:** ~500ms (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ HTML)
- **–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** ~3-7 —Å–µ–∫—É–Ω–¥ (OpenAI API)
- **–¢–æ—á–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:** ~85-90%
- **–ú–∞–∫—Å–∏–º—É–º –±–ª–æ–∫–æ–≤:** 20 –Ω–∞ –ø–∏—Å—å–º–æ

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:** 2025-11-02  
**–í–µ—Ä—Å–∏—è:** 2.0  
**Backend:**
- analyze-template-v2: `https://functions.poehali.dev/43abb32b-2387-4899-8e13-85b90879ce0c`
- fill-template-v2: `https://functions.poehali.dev/4d1e870e-39a9-4f8d-a9ca-b17f9811a585`
