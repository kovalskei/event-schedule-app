# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Event Schedule App

## üìã –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è email-—Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –ò–ò. –ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ frontend (React), backend (Cloud Functions –Ω–∞ Python), PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å UniSender/OpenRouter.

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞: `t_p22819116_event_schedule_app`

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

**events** (2 –∑–∞–ø–∏—Å–∏)
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `start_date`, `end_date` - –¥–∞—Ç—ã –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- `logo_url` - URL –ª–æ–≥–æ—Ç–∏–ø–∞
- `unisender_list_id` - –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–ø–∏—Å–∫—É —Ä–∞—Å—Å—ã–ª–∫–∏ UniSender
- `primary_cta_text`, `primary_cta_url` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é
- `location`, `format` - –º–µ—Å—Ç–æ –∏ —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- `theme`, `description` - —Ç–µ–º–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
- `status` - —Å—Ç–∞—Ç—É—Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (active/archived)

**content_types** (11 –∑–∞–ø–∏—Å–µ–π)
- `id` - —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `event_id` - —Å–≤—è–∑—å —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ–º
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ê–Ω–æ–Ω—Å —Å–ø–∏–∫–µ—Ä–∞", "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ")
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ
- `scheduling_rules` - JSON —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**email_templates** (30 –∑–∞–ø–∏—Å–µ–π)
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á —à–∞–±–ª–æ–Ω–∞
- `event_id` - —Å–≤—è–∑—å —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ–º
- `content_type_id` - —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `html_template` - HTML —Å Mustache –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ `{{intro_heading}}`, `{{cta_url}}`, etc.
- `subject_template` - —Ç–µ–º–∞ –ø–∏—Å—å–º–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- `instructions` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- `is_example` - —Ñ–ª–∞–≥ —ç—Ç–∞–ª–æ–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ (–¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏)

**knowledge_store** (18 –∑–∞–ø–∏—Å–µ–π)
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `event_id` - —Å–≤—è–∑—å —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ–º
- `content` - —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- `content_type` - —Ç–∏–ø (google_doc/manual_text)
- `source_url` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫
- `meta_data` - JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

**generated_emails** (23 –∑–∞–ø–∏—Å–∏)
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- `event_id`, `content_type_id`, `template_id` - —Å–≤—è–∑–∏
- `subject`, `html_body` - —Ç–µ–º–∞ –∏ HTML –ø–∏—Å—å–º–∞
- `status` - draft/sent/scheduled
- `scheduled_at` - –¥–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
- `validation_status` - pending/passed/failed
- `validation_notes` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):
- `campaigns`, `content_plan`, `content_plan_items` - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π
- `email_stats`, `email_cta_links` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–ª–∏–∫–æ–≤
- `utm_rules`, `utm_logs`, `link_rules` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UTM –º–µ—Ç–∫–∞–º–∏
- `mailing_lists`, `event_mailing_lists` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞–º–∏
- `schedule_rules` - –ø—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- `campaign_logs` - –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–æ–∫

---

## ‚öôÔ∏è Backend Functions

### 1. **events-manager** 
**URL**: `https://functions.poehali.dev/b56e5895-fb22-4d96-b746-b046a9fd2750`
**–Ø–∑—ã–∫**: Python
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π, —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —à–∞–±–ª–æ–Ω–æ–≤, –∑–Ω–∞–Ω–∏–π

**Actions (POST body.action)**:
- `get_events` ‚Üí —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- `get_event_settings` (event_id) ‚Üí –ø–æ–ª–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `create_event` (name, start_date, ...) ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `update_event` (event_id, ...) ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `create_content_type` (event_id, name, ...) ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `update_content_type` (content_type_id, ...) ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞
- `delete_content_type` (content_type_id) ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ —Ç–∏–ø–∞
- `create_email_template` (event_id, content_type_id, html_template, ...) ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `update_email_template` (template_id, ...) ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `delete_email_template` (template_id) ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `add_knowledge` (event_id, content, source_url, ...) ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏—è
- `delete_knowledge` (knowledge_id) ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ß–∏—Ç–∞–µ—Ç Google Docs/Sheets —á–µ—Ä–µ–∑ `read_google_doc(url, sheet_name)`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑ –ª–∏—Å—Ç–∞ "Meta" –≤ —Ñ–æ—Ä–º–∞—Ç–µ A=–∫–ª—é—á, B=–∑–Ω–∞—á–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `psycopg2` —Å `RealDictCursor` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL

---

### 2. **template-generator**
**URL**: `https://functions.poehali.dev/616d6890-24c3-49c8-8b29-692dd342933b`
**–Ø–∑—ã–∫**: Python
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–π HTML –≤ —à–∞–±–ª–æ–Ω —Å Mustache –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ OpenRouter (Claude Sonnet 3.5)

**–í—Ö–æ–¥ (POST body)**:
```json
{
  "html_content": "<html>...</html>",
  "event_id": 1,
  "content_type_id": 3,
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞"
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTML –≤ OpenRouter API (`https://openrouter.ai/api/v1/chat/completions`)
2. –ú–æ–¥–µ–ª—å `anthropic/claude-3.5-sonnet` –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç HTML
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON: `{"html_layout": "...", "slots_schema": {...}, "notes": "..."}`
4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç **2 —à–∞–±–ª–æ–Ω–∞** –≤ –ë–î:
   - –û—Ä–∏–≥–∏–Ω–∞–ª —Å `is_example=true` (–¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
   - –ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω —Å–æ —Å–ª–æ—Ç–∞–º–∏ `is_example=false`

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω–∞**:
- `{{intro_heading}}`, `{{intro_text}}` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ
- `{{subheading}}` ‚Äî –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫
- `{{cta_text}}`, `{{cta_url}}` ‚Äî –∫–Ω–æ–ø–∫–∞ CTA
- `{{#speakers}}...{{/speakers}}` ‚Äî —Ü–∏–∫–ª –ø–æ —Å–ø–∏–∫–µ—Ä–∞–º (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ API –∫–ª—é—á—É**: `OPENROUTER_API_KEY` –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö

---

### 3. **generate-drafts-v2**
**URL**: `https://functions.poehali.dev/90b50454-3ef3-4d5f-add1-e22941c980f4`
**–Ø–∑—ã–∫**: Python
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–∏—Å—å–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞ –∏ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π —á–µ—Ä–µ–∑ –ò–ò

**–í—Ö–æ–¥ (POST body)**:
```json
{
  "template_id": 5,
  "user_prompt": "–°–¥–µ–ª–∞–π –ø–∏—Å—å–º–æ –ø—Ä–æ —Å–ø–∏–∫–µ—Ä–∞ –ò–≤–∞–Ω–∞"
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —à–∞–±–ª–æ–Ω –∏ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∏–∑ –ë–î
2. –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è Claude —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
3. –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `{{intro_heading}}`, `{{cta_text}}`, etc.
4. –†–µ–Ω–¥–µ—Ä–∏—Ç Mustache —à–∞–±–ª–æ–Ω —Å –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `chevron`
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `generated_emails` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `draft`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: `OPENROUTER_API_KEY`, `DATABASE_URL`

---

### 4. **style-validator**
**URL**: `https://functions.poehali.dev/7fe04096-4a45-4b17-a391-c4b02b1b464a`
**–Ø–∑—ã–∫**: Python
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–æ —ç—Ç–∞–ª–æ–Ω–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É

**–í—Ö–æ–¥ (POST body)**:
```json
{
  "draft_id": 12
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ –∏ –Ω–∞—Ö–æ–¥–∏—Ç —ç—Ç–∞–ª–æ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω (`is_example=true`)
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–∞ HTML –≤ Claude –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü, inline CSS, footer, —Å—Å—ã–ª–∫–∏
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `validation_status` (passed/failed) –∏ `validation_notes`
5. –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—è –≤ –ë–î `generated_emails`

---

### 5. **index-knowledge**
**URL**: `https://functions.poehali.dev/814ac16e-cb58-4603-b3af-4b6f9215fb05`
**–Ø–∑—ã–∫**: Python
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –≤—Å—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (—á–∏—Ç–∞–µ—Ç Google Docs)

**–í—Ö–æ–¥ (POST body)**:
```json
{
  "event_id": 1
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ `knowledge_store` –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
2. –î–ª—è –∫–∞–∂–¥–æ–π —Å `content_type=google_doc` –≤—ã–∑—ã–≤–∞–µ—Ç `read_google_doc(source_url)`
3. –û–±–Ω–æ–≤–ª—è–µ—Ç `content` –≤ –ë–î —Å–≤–µ–∂–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

### 6. **image-uploader**
**URL**: `https://functions.poehali.dev/61daaad5-eb92-4f21-8104-8760f8d0094e`
**–Ø–∑—ã–∫**: Python (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ª–æ–≥–æ—Ç–∏–ø—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π)

---

### 7. **sync-events-unisender**
**URL**: `https://functions.poehali.dev/b7fefc5f-605d-4c44-8830-b5cf0c00ca0e`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤ —Ä–∞—Å—Å—ã–ª–∫–∏ —Å UniSender API

---

### 8-14. **–î—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- `ai-content-generator`, `ai-content-generator-advanced` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `campaign-manager` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏—è–º–∏
- `unisender-manager` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å UniSender
- `google-docs-reader` ‚Äî —á—Ç–µ–Ω–∏–µ Google –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `telegram-notifier` ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

---

## üé® Frontend

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **React** + **TypeScript** + **Vite**
- **Tailwind CSS** + **shadcn/ui** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **React Router** –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**src/components/events/EventSettingsDialog.tsx**
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- –í–∫–ª–∞–¥–∫–∏: –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞, Email —à–∞–±–ª–æ–Ω—ã, –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
- –§—É–Ω–∫—Ü–∏–∏:
  - –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  - –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ (–æ–±—ã—á–Ω—ã–π + –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ —Å–ª–æ—Ç–∞–º–∏)
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π (–≤—Ä—É—á–Ω—É—é –∏–ª–∏ Google Docs)
  - –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

**src/components/events/DraftsViewer.tsx**
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —Å—Ç–∞—Ç—É—Å—É
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä HTML –≤ iframe
- –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `style-validator`
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ UniSender"

**src/App.tsx**
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–±—ã—Ç–∏–π
- –ö–Ω–æ–ø–∫–∏ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" –∏ "–ß–µ—Ä–Ω–æ–≤–∏–∫–∏"

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```typescript
const EVENTS_MANAGER_URL = 'https://functions.poehali.dev/...';
const TEMPLATE_GENERATOR_URL = 'https://functions.poehali.dev/...';
const GENERATE_DRAFTS_URL = 'https://functions.poehali.dev/...';
const INDEX_KNOWLEDGE_URL = 'https://functions.poehali.dev/...';
const STYLE_VALIDATOR_URL = 'https://functions.poehali.dev/...';
```

---

## üîÑ –¢–∏–ø–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã

### 1Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
```
Frontend ‚Üí POST events-manager {action: 'create_event', name, dates, ...}
‚Üí DB: INSERT INTO events
‚Üí Frontend: –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
```

### 2Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —á–µ—Ä–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–π HTML –≤ —Ñ–æ—Ä–º—É
2. Frontend ‚Üí POST template-generator {html_content, event_id, ...}
3. Backend ‚Üí OpenRouter API (Claude –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç HTML)
4. Backend ‚Üí DB: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª (is_example=true) + —à–∞–±–ª–æ–Ω —Å–æ —Å–ª–æ—Ç–∞–º–∏
5. Frontend: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω!"
```

### 3Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –ø–∏—Å—å–º–∞
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —à–∞–±–ª–æ–Ω –∏ –ø–∏—à–µ—Ç –ø—Ä–æ–º–ø—Ç
2. Frontend ‚Üí POST generate-drafts-v2 {template_id, user_prompt}
3. Backend: –∑–∞–≥—Ä—É–∂–∞–µ—Ç —à–∞–±–ª–æ–Ω + knowledge_store
4. Backend ‚Üí OpenRouter API (Claude –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
5. Backend: —Ä–µ–Ω–¥–µ—Ä–∏—Ç Mustache —à–∞–±–ª–æ–Ω
6. Backend ‚Üí DB: INSERT INTO generated_emails (status='draft')
7. Frontend: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫ –≤ DraftsViewer
```

### 4Ô∏è‚É£ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å" –≤ —á–µ—Ä–Ω–æ–≤–∏–∫–µ
2. Frontend ‚Üí POST style-validator {draft_id}
3. Backend: –Ω–∞—Ö–æ–¥–∏—Ç —ç—Ç–∞–ª–æ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω (is_example=true)
4. Backend ‚Üí OpenRouter API (Claude —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç HTML)
5. Backend ‚Üí DB: UPDATE generated_emails SET validation_status, validation_notes
6. Frontend: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```

### 5Ô∏è‚É£ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π"
2. Frontend ‚Üí POST index-knowledge {event_id}
3. Backend: –∑–∞–≥—Ä—É–∂–∞–µ—Ç knowledge_store WHERE event_id=X
4. Backend: –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ —Å content_type='google_doc':
   ‚Üí —á–∏—Ç–∞–µ—Ç Google Doc –ø–æ source_url
   ‚Üí UPDATE content –≤ –ë–î
5. Frontend: "–ü—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ N —ç–ª–µ–º–µ–Ω—Ç–æ–≤"
```

---

## üîê –°–µ–∫—Ä–µ—Ç—ã (Environment Variables)

**Backend —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫**:
- `DATABASE_URL` ‚Äî DSN –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `OPENROUTER_API_KEY` ‚Äî –∫–ª—é—á –¥–ª—è OpenRouter API
- `UNISENDER_API_KEY` ‚Äî –∫–ª—é—á –¥–ª—è UniSender API (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**Frontend –ù–ï –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞** –∫ —Å–µ–∫—Ä–µ—Ç–∞–º –Ω–∞–ø—Ä—è–º—É—é.

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ backend —Ñ—É–Ω–∫—Ü–∏–π
```bash
get_logs(source='backend/template-generator')
get_logs(source='backend/events-manager')
get_logs(source='backend/generate-drafts-v2')
get_logs(source='backend/style-validator')
```

### –õ–æ–≥–∏ frontend
```bash
get_logs(source='frontend')  # —Ç–æ –∂–µ —Å–∞–º–æ–µ —á—Ç–æ –∫–æ–Ω—Å–æ–ª—å F12
```

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **"html_content —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π"** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ
2. **"validation_status=null"** ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —á–µ—Ä–µ–∑ style-validator
3. **"–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø—É—Å—Ç–∞—è"** ‚Üí –Ω–∞–∂–∞—Ç—å "–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π"

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ç–æ—á–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1Ô∏è‚É£ –ü–µ—Ä–µ–¥–∞—á–∞ HTML –≤ template-generator

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä `html_content` –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- ‚úÖ Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π HTML (—Å `<html>`, `<head>`, `<body>` –∏–ª–∏ —Ö–æ—Ç—è –±—ã —Ç–µ–ª–æ –ø–∏—Å—å–º–∞)
- ‚úÖ –†–∞–∑–º–µ—Ä –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç OpenRouter API (~100KB –¥–ª—è Claude)
- ‚úÖ `event_id`, `content_type_id`, `name` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ë–î
- ‚úÖ –õ–æ–≥–∏ OpenRouter: —Ç–∞–π–º–∞—É—Ç—ã, –æ—à–∏–±–∫–∏ –º–æ–¥–µ–ª–∏, –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
```typescript
// Frontend console (F12):
console.log('[FRONTEND] html_length:', requestBody.html_content.length);
console.log('[FRONTEND] html_preview:', requestBody.html_content.substring(0, 200));
```

```bash
# Backend logs:
get_logs(source='backend/template-generator')
# –ò—â–∏—Ç–µ: [DEBUG] Received html_content length: ...
```

---

### 2Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ –∏ —à–∞–±–ª–æ–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: OpenRouter –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON –∏–ª–∏ –ø—É—Å—Ç–æ–π `slots_schema`

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- ‚úÖ –û—Ç–≤–µ—Ç Claude —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞–ª–∏–¥–Ω—ã–π JSON: `{"html_layout": "...", "slots_schema": {...}, "notes": "..."}`
- ‚úÖ `slots_schema` –Ω–µ –ø—É—Å—Ç–æ–π –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`intro_heading`, `cta_url`, etc.)
- ‚úÖ –í –ë–î —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **2 —à–∞–±–ª–æ–Ω–∞**: –æ—Ä–∏–≥–∏–Ω–∞–ª (`is_example=true`) + –Ω–æ–≤—ã–π (`is_example=false`)
- ‚úÖ –ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç Mustache –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `{{intro_heading}}`, –Ω–µ —Å—Ç–∞—Ç–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –≤ –ë–î:
SELECT id, name, is_example, 
       LENGTH(html_template) as html_length,
       SUBSTRING(html_template, 1, 200) as html_preview
FROM email_templates 
WHERE event_id = 1 
ORDER BY created_at DESC 
LIMIT 5;
```

**–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º—ã**:
- –®–∞–±–ª–æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ `{{...}}`
- `is_example` –Ω–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –¢–æ–ª—å–∫–æ 1 —à–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω –≤–º–µ—Å—Ç–æ 2

---

### 3Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –ø–∏—Å—å–º–∞ (generate-drafts-v2)

**–ü—Ä–æ–±–ª–µ–º–∞**: –ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–∑–∞–º–µ–Ω—ë–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–ª–∏ –ø—É—Å—Ç—ã–µ –º–µ—Å—Ç–∞

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- ‚úÖ –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω–∞ (`knowledge_store` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è `event_id`)
- ‚úÖ –ü—Ä–æ–º–ø—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –í–°–ï–• –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–∞
- ‚úÖ –û—Ç–≤–µ—Ç –ò–ò —Å–æ–¥–µ—Ä–∂–∏—Ç JSON —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏: `{"intro_heading": "...", "cta_text": "...", ...}`
- ‚úÖ –ò–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–∞—é—Ç (—Ä–µ–≥–∏—Å—Ç—Ä, –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è): `intro_heading` ‚â† `intro_headline`
- ‚úÖ Chevron —Ä–µ–Ω–¥–µ—Ä–∏—Ç —à–∞–±–ª–æ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í –ë–î `generated_emails.html_body` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π HTML –±–µ–∑ `{{...}}`

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–∞:
SELECT id, subject, 
       CASE 
         WHEN html_body LIKE '%{{%' THEN '–û–®–ò–ë–ö–ê: –µ—Å—Ç—å –Ω–µ–∑–∞–º–µ–Ω—ë–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ'
         ELSE 'OK'
       END as status,
       LENGTH(html_body) as html_length
FROM generated_emails 
WHERE id = 23;
```

**–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º—ã**:
- `html_body` —Å–æ–¥–µ—Ä–∂–∏—Ç `{{intro_heading}}` ‚Äî –∑–Ω–∞—á–∏—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
- `html_body` –ø—É—Å—Ç ‚Äî –æ—à–∏–±–∫–∞ –Ω–∞ —ç—Ç–∞–ø–µ chevron
- `subject` —Å–æ–¥–µ—Ä–∂–∏—Ç `{{...}}` ‚Äî –Ω–µ –∑–∞–º–µ–Ω–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–º—ã

---

### 4Ô∏è‚É£ –í–∞–ª–∏–¥–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞ (style-validator)

**–ü—Ä–æ–±–ª–µ–º–∞**: `validation_status=null` –∏–ª–∏ –≤—Å–µ –ø–∏—Å—å–º–∞ –ø–æ–ª—É—á–∞—é—Ç `failed`

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- ‚úÖ –≠—Ç–∞–ª–æ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (`is_example=true` –¥–ª—è —Ç–æ–≥–æ –∂–µ `content_type_id`)
- ‚úÖ SQL –∑–∞–ø—Ä–æ—Å –Ω–∞—Ö–æ–¥–∏—Ç —ç—Ç–∞–ª–æ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–µ —Å–ª–∏—à–∫–æ–º –∂—ë—Å—Ç–∫–∏–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü, inline CSS)
- ‚úÖ Claude –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- ‚úÖ `validation_notes` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —ç—Ç–∞–ª–æ–Ω–∞:
SELECT id, name, is_example, content_type_id
FROM email_templates
WHERE event_id = 1 AND is_example = true;
```

```bash
# –õ–æ–≥–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞:
get_logs(source='backend/style-validator')
# –ò—â–∏—Ç–µ: [ERROR] No example template found...
```

**–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º—ã**:
- `validation_status` –æ—Å—Ç–∞—ë—Ç—Å—è `null` ‚Äî —ç—Ç–∞–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –æ—à–∏–±–∫–∞ API
- –í—Å–µ –ø–∏—Å—å–º–∞ `failed` ‚Äî –∫—Ä–∏—Ç–µ—Ä–∏–∏ —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ –∏–ª–∏ —ç—Ç–∞–ª–æ–Ω —É—Å—Ç–∞—Ä–µ–ª
- `validation_notes` –ø—É—Å—Ç–æ ‚Äî –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–∞ Claude

---

### 5Ô∏è‚É£ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ Mustache –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –Ω–µ –≤ —Ç–µ –º–µ—Å—Ç–∞ –∏–ª–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- ‚úÖ Mustache –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö `<td>`, `<div>` —Å –Ω—É–∂–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏
- ‚úÖ –ù–µ –∑–∞–±—ã—Ç—ã —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏: `{{cta_url}}` –∞ –Ω–µ `cta_url`
- ‚úÖ –î–ª—è —Ü–∏–∫–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `{{#speakers}}...{{/speakers}}`
- ‚úÖ Mobile-–∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å: –µ—Å—Ç—å `@media` queries, `width: 100%` –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- ‚úÖ Inline CSS —Å–æ—Ö—Ä–∞–Ω—ë–Ω (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ—á—Ç–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç `<style>`)

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
```typescript
// Frontend preview (DraftsViewer.tsx):
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ iframe, —á—Ç–æ:
// 1. –¢–µ–∫—Å—Ç –≤–∏–¥–µ–Ω (–Ω–µ –±–µ–ª—ã–π –Ω–∞ –±–µ–ª–æ–º)
// 2. –ö–Ω–æ–ø–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã
// 3. –ù–∞ –º–æ–±–∞–π–ª–µ –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è
```

---

### 6Ô∏è‚É£ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å UniSender / —Ä–∞—Å—Å—ã–ª–∫–æ–π

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∏—Å—å–º–æ –ø—Ä–æ—à–ª–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é, –Ω–æ UniSender –∫–∏–¥–∞–µ—Ç –æ—à–∏–±–∫—É

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- ‚úÖ –¢–æ–ª—å–∫–æ inline CSS (–±–µ–∑ `<style>` –∏–ª–∏ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ `style="..."`)
- ‚úÖ –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Ç–µ–≥–∏ —É–¥–∞–ª–µ–Ω—ã (`<script>`, `<form>`, `<iframe>`)
- ‚úÖ –°—Å—ã–ª–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã (–Ω–µ—Ç –ø—Ä–æ–±–µ–ª–æ–≤, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –†–∞–∑–º–µ—Ä –ø–∏—Å—å–º–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 100KB
- ‚úÖ –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ—é—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ URL (–Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ `src="/logo.png"`)

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
```bash
# –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ UniSender (–∏–∑ –ª–æ–≥–æ–≤):
get_logs(source='backend/unisender-manager')
# –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ API: "Invalid HTML", "Tag not allowed", etc.
```

---

## üß™ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ì–∏–ø–æ—Ç–µ–∑–∞ 1: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
```sql
-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —à–∞–±–ª–æ–Ω:
SELECT html_template FROM email_templates WHERE id = 5;
-- –ò—â–∏—Ç–µ: {{intro_heading}}, {{cta_text}}, {{cta_url}}

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫:
SELECT html_body FROM generated_emails WHERE id = 23;
-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: –∑–∞–º–µ–Ω–∏–ª–∏—Å—å –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å {{...}}
```

### –ì–∏–ø–æ—Ç–µ–∑–∞ 2: –ò–ò –Ω–µ –≤–µ—Ä–Ω—É–ª JSON —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
```bash
# –õ–æ–≥–∏ generate-drafts-v2:
get_logs(source='backend/generate-drafts-v2')
# –ò—â–∏—Ç–µ: [DEBUG] AI response: {...}
# –ï—Å–ª–∏ —Ç–∞–º —Ç–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ JSON ‚Äî –ø—Ä–æ–º–ø—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
```

### –ì–∏–ø–æ—Ç–µ–∑–∞ 3: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø—É—Å—Ç–∞
```sql
SELECT COUNT(*) FROM knowledge_store WHERE event_id = 1;
-- –ï—Å–ª–∏ 0 ‚Äî –ò–ò –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```

### –ì–∏–ø–æ—Ç–µ–∑–∞ 4: –≠—Ç–∞–ª–æ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω
```sql
SELECT id, name, is_example 
FROM email_templates 
WHERE content_type_id = 3 AND is_example = true;
-- –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### –ì–∏–ø–æ—Ç–µ–∑–∞ 5: Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ —Ç–æ –ø–æ–ª–µ
```typescript
// Console F12 –≤ EventSettingsDialog.tsx:
console.log('[FRONTEND] Sending:', {
  html_content: newTemplate.html_template,
  event_id: eventId,
  content_type_id: parseInt(newTemplate.content_type_id)
});
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: html_template –∑–∞–ø–æ–ª–Ω–µ–Ω? event_id –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π?
```

---

## üîç –ß–µ–∫–ª–∏—Å—Ç –æ—Ç–ª–∞–¥–∫–∏

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–π–¥–∏—Ç–µ –ø–æ —ç—Ç–æ–º—É —Å–ø–∏—Å–∫—É:

1. ‚úÖ **–õ–æ–≥–∏ frontend** (`get_logs(source='frontend')`) ‚Äî —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥?
2. ‚úÖ **–õ–æ–≥–∏ backend —Ñ—É–Ω–∫—Ü–∏–∏** ‚Äî –ø–æ–ª—É—á–∏–ª –ª–∏ –±—ç–∫–µ–Ω–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î** ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –ª–∏ –¥–∞–Ω–Ω—ã–µ? –ö–∞–∫–∏–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã?
4. ‚úÖ **–û—Ç–≤–µ—Ç OpenRouter API** ‚Äî –≤–µ—Ä–Ω—É–ª –ª–∏ –ò–ò –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON?
5. ‚úÖ **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ Mustache** ‚Äî –∑–∞–º–µ–Ω–∏–ª–∏—Å—å –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º HTML?
6. ‚úÖ **Preview –≤ iframe** ‚Äî –≤–∏–∑—É–∞–ª—å–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–∏—Å—å–º–æ?
7. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è** ‚Äî –µ—Å—Ç—å –ª–∏ —ç—Ç–∞–ª–æ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω? –ß—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç `validation_notes`?

---

## üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞)

- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç**: —Å–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π, —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —à–∞–±–ª–æ–Ω–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç**: –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ —Å–ª–æ—Ç–∞–º–∏ —á–µ—Ä–µ–∑ Claude
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç**: –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø–æ —ç—Ç–∞–ª–æ–Ω–Ω—ã–º —à–∞–±–ª–æ–Ω–∞–º
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç**: –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è Google Docs –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
- üöß **–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ**: –∫–∞–º–ø–∞–Ω–∏–∏, UTM –ø—Ä–∞–≤–∏–ª–∞, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–æ–∫
- üöß **–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UniSender (–æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤)

---

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –≤ –Ω–æ–≤–æ–º –¥–∏–∞–ª–æ–≥–µ

–°–∫–æ–ø–∏—Ä—É–π –∏ –æ—Ç–ø—Ä–∞–≤—å –≤ –Ω–æ–≤—ã–π —á–∞—Ç:

```
–ü—Ä–æ–µ–∫—Ç: events.poehali.dev  
–ß–∏—Ç–∞–π docs/ARCHITECTURE.md –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–∏—Å—Ç–µ–º—ã.

–ë–∞–∑–∞: t_p22819116_event_schedule_app  
–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã: events, email_templates, generated_emails, knowledge_store, content_types

Backend: /backend/events-manager, /backend/template-generator, /backend/generate-drafts-v2, /backend/style-validator

Frontend: src/App.tsx, src/components/events/EventSettingsDialog.tsx, src/components/events/DraftsViewer.tsx
```

–ò —è —Å—Ä–∞–∑—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª—é –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç! üéØ