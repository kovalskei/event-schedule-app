# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Event Schedule App

## üìã –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è email-—Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –ò–ò. –ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ frontend (React), backend (Cloud Functions –Ω–∞ Python), PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å UniSender/OpenRouter.

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞: `t_p22819116_event_schedule_app`

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

**events** - –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `start_date`, `end_date` - –¥–∞—Ç—ã –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- `logo_url` - URL –ª–æ–≥–æ—Ç–∏–ø–∞
- `unisender_list_id` - –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–ø–∏—Å–∫—É —Ä–∞—Å—Å—ã–ª–∫–∏ UniSender
- `primary_cta_text`, `primary_cta_url` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é
- `location`, `format` - –º–µ—Å—Ç–æ –∏ —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- `theme`, `description` - —Ç–µ–º–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
- `status` - —Å—Ç–∞—Ç—É—Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (active/archived)

**content_types** - –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–∏—Å–µ–º
- `id` - —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `event_id` - —Å–≤—è–∑—å —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ–º
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ê–Ω–æ–Ω—Å —Å–ø–∏–∫–µ—Ä–∞", "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ", "–ü—Ä–æ–¥–∞–∂–∞ —á–µ—Ä–µ–∑ –±–æ–ª—å")
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `scheduling_rules` - JSON —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**email_templates** - –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º —Å Mustache –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á —à–∞–±–ª–æ–Ω–∞
- `event_id` - —Å–≤—è–∑—å —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ–º
- `content_type_id` - —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `html_layout` - HTML —Å Mustache –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ `{{intro_heading}}`, `{{cta_url}}`, `{{#speakers}}...{{/speakers}}`
- `slots_schema` - JSONB —Å—Ö–µ–º–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `subject_template` - —Ç–µ–º–∞ –ø–∏—Å—å–º–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- `instructions` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò (–ø—Ä–æ–º–ø—Ç –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
- `is_example` - —Ñ–ª–∞–≥ —ç—Ç–∞–ª–æ–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ (–¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç–∏–ª–µ–π)
- `rag_sources` - JSON –º–∞—Å—Å–∏–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è RAG (–Ω–∞–ø—Ä–∏–º–µ—Ä: `["program", "pain_points"]`)
- `html_template` - (—É—Å—Ç–∞—Ä–µ–≤—à–µ–µ) —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç —Å `{pain_points}`, `{program_topics}`

**knowledge_store** - –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è RAG
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `event_id` - —Å–≤—è–∑—å —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ–º
- `content` - —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –±–æ–ª–∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –∫–µ–π—Å—ã)
- `content_type` - —Ç–∏–ø (google_doc/manual_text/program/pain_points)
- `source_url` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ (Google Docs URL)
- `meta_data` - JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- `indexed_at` - timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

**generated_emails** - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞ (—á–µ—Ä–Ω–æ–≤–∏–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ)
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- `event_id`, `content_type_id`, `template_id` - —Å–≤—è–∑–∏
- `subject`, `html_body` - —Ç–µ–º–∞ –∏ HTML –ø–∏—Å—å–º–∞
- `status` - draft/sent/scheduled
- `scheduled_at` - –¥–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
- `validation_status` - pending/passed/failed (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∏–ª–µ–π)
- `validation_notes` - —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** (–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞):
- `campaigns`, `content_plan`, `content_plan_items` - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π
- `email_stats`, `email_cta_links` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–ª–∏–∫–æ–≤
- `utm_rules`, `utm_logs`, `link_rules` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UTM –º–µ—Ç–∫–∞–º–∏
- `mailing_lists`, `event_mailing_lists` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞–º–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
- `schedule_rules` - –ø—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- `campaign_logs` - –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–æ–∫

---

## ‚öôÔ∏è Backend Functions

### 1. **events-manager** 
**URL**: `https://functions.poehali.dev/b56e5895-fb22-4d96-b746-b046a9fd2750`  
**–Ø–∑—ã–∫**: Python 3.11  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π, —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —à–∞–±–ª–æ–Ω–æ–≤, –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

**Actions (POST body.action)**:
- `get_events` ‚Üí —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- `get_event_settings` (event_id) ‚Üí –ø–æ–ª–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (—Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —à–∞–±–ª–æ–Ω—ã, –∑–Ω–∞–Ω–∏—è)
- `create_event` (name, start_date, ...) ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `update_event` (event_id, ...) ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `create_content_type` (event_id, name, description) ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `update_content_type` (content_type_id, ...) ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞
- `delete_content_type` (content_type_id) ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ —Ç–∏–ø–∞
- `create_email_template` (event_id, content_type_id, html_template, ...) ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `update_email_template` (template_id, ...) ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `delete_email_template` (template_id) ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `add_knowledge` (event_id, content, source_url, content_type) ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏—è –≤ –±–∞–∑—É
- `delete_knowledge` (knowledge_id) ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ß–∏—Ç–∞–µ—Ç Google Docs/Sheets —á–µ—Ä–µ–∑ `read_google_doc(url, sheet_name)`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑ –ª–∏—Å—Ç–∞ "Meta" –≤ —Ñ–æ—Ä–º–∞—Ç–µ A=–∫–ª—é—á, B=–∑–Ω–∞—á–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `psycopg2` —Å `RealDictCursor` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL (Simple Query Protocol)

---

### 2. **template-generator**
**URL**: `https://functions.poehali.dev/616d6890-24c3-49c8-8b29-692dd342933b`  
**–Ø–∑—ã–∫**: Python 3.11  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–π HTML –≤ Mustache-—à–∞–±–ª–æ–Ω —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

**–ú–µ—Ç–æ–¥—ã**:
- **POST (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç AI)**: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Claude 3.5 Sonnet
- **POST —Å `use_regex=true`**: ‚ö° –ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ regex (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)

**–í—Ö–æ–¥ (POST body)**:
```json
{
  "html_content": "<html>...</html>",
  "use_ai": false  // true = Claude AI (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, —É–º–Ω–µ–µ), false = regex (–±—ã—Å—Ç—Ä–µ–µ)
}
```

**–†–µ–∂–∏–º Regex (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)**:
- –ó–∞–º–µ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç: `>—Ç–µ–∫—Å—Ç<` ‚Üí `{{ text_1 }}`, `{{ text_2 }}`
- –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏: `href="url"` ‚Üí `href="{{ url_1 }}"`
- –ó–∞–º–µ–Ω—è–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏: `src="img.jpg"` ‚Üí `src="{{ image_1 }}"`
- ‚ö° –†–∞–±–æ—Ç–∞–µ—Ç –∑–∞ 50-200ms
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç 100% —Å—Ç–∏–ª–µ–π (–≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, CSS)

**–†–µ–∂–∏–º AI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**:
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ Claude
- –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –±–ª–æ–∫–∏ ‚Üí —Å–æ–∑–¥–∞—ë—Ç —Ü–∏–∫–ª—ã `{{#speakers}}...{{/speakers}}`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `slots_schema` (JSONB) –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- üêå –†–∞–±–æ—Ç–∞–µ—Ç 3-10 —Å–µ–∫—É–Ω–¥

**–í—ã—Ö–æ–¥**:
```json
{
  "template": "HTML —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ {{ text_1 }}, {{ url_1 }}",
  "variables": {
    "text_1": "–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç",
    "url_1": "https://example.com",
    "image_1": "logo.png"
  }
}
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: `OPENROUTER_API_KEY` (—Ç–æ–ª—å–∫–æ –¥–ª—è AI —Ä–µ–∂–∏–º–∞)

---

### 3. **generate-drafts-v2**
**URL**: `https://functions.poehali.dev/90b50454-3ef3-4d5f-add1-e22941c980f4`  
**–Ø–∑—ã–∫**: Python 3.11  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–∏—Å—å–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ Mustache-—à–∞–±–ª–æ–Ω–∞ –∏ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π —á–µ—Ä–µ–∑ –ò–ò

**–í—Ö–æ–¥ (POST body)**:
```json
{
  "template_id": 5,
  "user_prompt": "–°–¥–µ–ª–∞–π –ø–∏—Å—å–º–æ –ø—Ä–æ —Å–ø–∏–∫–µ—Ä–∞ –ò–≤–∞–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞"
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —à–∞–±–ª–æ–Ω (`html_layout`, `slots_schema`, `instructions`, `rag_sources`)
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ `knowledge_store` –ø–æ `rag_sources`
3. –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è Claude:
   - System: –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–∞–∫ –∑–∞–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
   - User: `instructions` + –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π + –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å
4. Claude –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
   ```json
   {
     "subject": "–¢–µ–º–∞ –ø–∏—Å—å–º–∞",
     "intro_heading": "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
     "speakers": [
       {"name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", "topic": "AI –≤ HR", "photo": "url"}
     ],
     "cta_text": "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è",
     "cta_url": "https://..."
   }
   ```
5. –†–µ–Ω–¥–µ—Ä–∏—Ç Mustache —à–∞–±–ª–æ–Ω —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `chevron`:
   ```python
   final_html = chevron.render(html_layout, ai_variables)
   ```
6. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `generated_emails` (status=draft)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: `OPENROUTER_API_KEY`, `DATABASE_URL`

---

### 4. **style-validator**
**URL**: `https://functions.poehali.dev/7fe04096-4a45-4b17-a391-c4b02b1b464a`  
**–Ø–∑—ã–∫**: Python 3.11  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–æ —ç—Ç–∞–ª–æ–Ω–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É

**–í—Ö–æ–¥ (POST body)**:
```json
{
  "draft_id": 12
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ (HTML –∏–∑ `generated_emails`)
2. –ù–∞—Ö–æ–¥–∏—Ç —ç—Ç–∞–ª–æ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω (`is_example=true` —Å —Ç–µ–º –∂–µ `content_type_id`)
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–∞ HTML –≤ Claude –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü, inline CSS, —Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã, footer
   - –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç: —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `validation_status` (passed/failed) + `validation_notes`
5. –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—è –≤ `generated_emails`:
   ```sql
   UPDATE generated_emails 
   SET validation_status = 'passed', 
       validation_notes = '–°—Ç–∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç...'
   WHERE id = 12
   ```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: `OPENROUTER_API_KEY`, `DATABASE_URL`

---

### 5. **index-knowledge**
**URL**: `https://functions.poehali.dev/814ac16e-cb58-4603-b3af-4b6f9215fb05`  
**–Ø–∑—ã–∫**: Python 3.11  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –≤—Å—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (—á–∏—Ç–∞–µ—Ç Google Docs)

**–í—Ö–æ–¥ (POST body)**:
```json
{
  "event_id": 1
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ `knowledge_store` –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
2. –î–ª—è –∫–∞–∂–¥–æ–π —Å `content_type=google_doc`:
   - –í—ã–∑—ã–≤–∞–µ—Ç `read_google_doc(source_url)`
   - –ü–∞—Ä—Å–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (—Ç–µ–∫—Å—Ç, —Ç–∞–±–ª–∏—Ü—ã)
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ `content` —Å–≤–µ–∂–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - –°—Ç–∞–≤–∏—Ç `indexed_at = NOW()`
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è

---

### 6. **image-uploader**
**URL**: `https://functions.poehali.dev/61daaad5-eb92-4f21-8104-8760f8d0094e`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ª–æ–≥–æ—Ç–∏–ø—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π, —Ñ–æ—Ç–æ —Å–ø–∏–∫–µ—Ä–æ–≤)

---

### 7. **sync-events-unisender**
**URL**: `https://functions.poehali.dev/b7fefc5f-605d-4c44-8830-b5cf0c00ca0e`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤ —Ä–∞—Å—Å—ã–ª–∫–∏ —Å UniSender API

---

### 8-14. **–î—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- `ai-content-generator`, `ai-content-generator-advanced` ‚Äî —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `campaign-manager` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏—è–º–∏ UniSender
- `unisender-manager` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å API UniSender (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π, –æ—Ç–ø—Ä–∞–≤–∫–∞)
- `google-docs-reader` ‚Äî standalone —á–∏—Ç–∞–ª–∫–∞ Google Docs
- `telegram-notifier` ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
- `execute-request` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

---

## üé® Frontend

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **React 18** + **TypeScript** + **Vite**
- **Tailwind CSS** + **shadcn/ui** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **React Router** –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- **Recharts** –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**src/App.tsx**
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–±—ã—Ç–∏–π —Å –¥–∞—Ç–∞–º–∏, –ª–æ–≥–æ—Ç–∏–ø–∞–º–∏
- –ö–Ω–æ–ø–∫–∏: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏", "–ß–µ—Ä–Ω–æ–≤–∏–∫–∏", "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"

**src/pages/TemplateTest.tsx** (–ø—É—Ç—å –≤ –∫–æ–¥–µ: `/src/pages/TemplateTest.tsx`)  
**‚ö° –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å HTML ‚Üí Mustache**
- –ó–∞–≥—Ä—É–∑–∫–∞ HTML —Ñ–∞–π–ª–∞ –∏–ª–∏ –≤—Å—Ç–∞–≤–∫–∞ –∫–æ–¥–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ–º–æ-—à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ `/public/` (test-simple-template.html, test-complex-template.html)
- Checkbox "ü§ñ AI (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)" –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤:
  - ‚ùå –ë–µ–∑ –≥–∞–ª–æ—á–∫–∏: **‚ö° Regex —Ä–µ–∂–∏–º** (50-200ms, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç 100% —Å—Ç–∏–ª–µ–π)
  - ‚úÖ –° –≥–∞–ª–æ—á–∫–æ–π: **ü§ñ AI —Ä–µ–∂–∏–º** (3-10s, —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ü–∏–∫–ª—ã)
- –î–≤–µ –∫–æ–ª–æ–Ω–∫–∏ —Å –ø—Ä–µ–≤—å—é —á–µ—Ä–µ–∑ `<iframe srcDoc={html}>`:
  - **–°–ª–µ–≤–∞**: "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π HTML" + –ø—Ä–µ–≤—å—é –≤ iframe
  - **–°–ø—Ä–∞–≤–∞**: "–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–π Mustache" + –ø—Ä–µ–≤—å—é —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤ iframe
- –ö–Ω–æ–ø–∫–∞ "‚ö° –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å (Regex)" / "ü§ñ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å (AI)"
- –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: –Ω–∞–∑–≤–∞–Ω–∏–µ ‚Üí –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: iframe —Å `srcDoc` –∏–∑–æ–ª–∏—Ä—É–µ—Ç HTML –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ DOM

**src/components/events/EventSettingsDialog.tsx**
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- –í–∫–ª–∞–¥–∫–∏:
  1. **–û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–∞—Ç—ã, CTA, –ª–æ–≥–æ—Ç–∏–ø
  2. **–¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø–∏—Å–µ–º
  3. **Email —à–∞–±–ª–æ–Ω—ã**: 
     - –û–±—ã—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (–≤—Å—Ç–∞–≤–∫–∞ HTML –≤—Ä—É—á–Ω—É—é)
     - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ —Å–ª–æ—Ç–∞–º–∏ (—á–µ—Ä–µ–∑ template-generator)
  4. **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**: 
     - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤—Ä—É—á–Ω—É—é
     - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Google Docs URL
     - –ö–Ω–æ–ø–∫–∞ "–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π"

**src/components/events/DraftsViewer.tsx**
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- –§–∏–ª—å—Ç—Ä—ã: –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –ø–æ —Å—Ç–∞—Ç—É—Å—É (draft/sent)
- –ö–∞—Ä—Ç–æ—á–∫–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤:
  - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä HTML —á–µ—Ä–µ–∑ `dangerouslySetInnerHTML` (‚ö†Ô∏è —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ DOM)
  - –ö–Ω–æ–ø–∫–∞ "–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏" ‚Üí –≤—ã–∑–æ–≤ `style-validator`
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (passed/failed)
  - –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ UniSender"
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UniSender API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–π

**src/pages/CampaignManager.tsx**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ email-–∫–∞–º–ø–∞–Ω–∏—è–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ AI (OpenAI/Claude)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Docs –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –±–æ–ª–µ–π
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä HTML —á–µ—Ä–µ–∑ `dangerouslySetInnerHTML`
- –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –≤ UniSender
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏ –º–∞—Å—Å–æ–≤—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è Frontend ‚Üî Backend

**–ü—Ä—è–º—ã–µ API –≤—ã–∑–æ–≤—ã –±–µ–∑ –ø—Ä–æ–∫—Å–∏:**
- Frontend –¥–µ–ª–∞–µ—Ç –ø—Ä—è–º—ã–µ `fetch()` –∑–∞–ø—Ä–æ—Å—ã –∫ backend —Ñ—É–Ω–∫—Ü–∏—è–º
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã –Ω–∞ `https://functions.poehali.dev/`
- CORS –≤–∫–ª—é—á—ë–Ω –Ω–∞ –≤—Å–µ—Ö backend —Ñ—É–Ω–∫—Ü–∏—è—Ö (`Access-Control-Allow-Origin: *`)
- **–ù–µ—Ç Vite proxy** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ backend –ø—É–±–ª–∏—á–Ω—ã–π

**CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ backend —Ñ—É–Ω–∫—Ü–∏—è—Ö:**
```python
# –í—Å–µ backend —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç OPTIONS –¥–ª—è CORS
if method == 'OPTIONS':
    return {
        'statusCode': 200,
        'headers': {
            'Access-Control-Allow-Origin': '*',
            'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',
            'Access-Control-Allow-Headers': 'Content-Type',
            'Access-Control-Max-Age': '86400'
        },
        'body': ''
    }
```

### –ú–µ—Ç–æ–¥—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ HTML –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

**1. Iframe —Å srcDoc (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ç–æ–¥)**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `src/pages/TemplateTest.tsx`
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è HTML –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ DOM
- –ö–æ–¥:
  ```tsx
  <iframe 
    srcDoc={htmlContent} 
    className="w-full h-[600px] border-0"
    sandbox="allow-same-origin"
  />
  ```
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ø—Ä–µ–≤—å—é —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏

**2. dangerouslySetInnerHTML (–±—ã—Å—Ç—Ä—ã–π –º–µ—Ç–æ–¥)**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `src/components/events/DraftsViewer.tsx`, `src/pages/CampaignManager.tsx`
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –±—ã—Å—Ç—Ä–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞, –Ω–µ—Ç iframe overhead
- –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: ‚ö†Ô∏è HTML –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ DOM (–≤–æ–∑–º–æ–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å—Ç–∏–ª–µ–π)
- –ö–æ–¥:
  ```tsx
  <div dangerouslySetInnerHTML={{ __html: emailHTML }} />
  ```
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≥–æ—Ç–æ–≤—ã—Ö email-—á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã API endpoints

```typescript
// src/App.tsx –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
const EVENTS_MANAGER_URL = 'https://functions.poehali.dev/b56e5895-fb22-4d96-b746-b046a9fd2750';
const TEMPLATE_GENERATOR_URL = 'https://functions.poehali.dev/616d6890-24c3-49c8-8b29-692dd342933b';
const GENERATE_DRAFTS_URL = 'https://functions.poehali.dev/90b50454-3ef3-4d5f-add1-e22941c980f4';
const STYLE_VALIDATOR_URL = 'https://functions.poehali.dev/7fe04096-4a45-4b17-a391-c4b02b1b464a';
const INDEX_KNOWLEDGE_URL = 'https://functions.poehali.dev/814ac16e-cb58-4603-b3af-4b6f9215fb05';
```

---

## üîÑ Workflow –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∏—Å–µ–º

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ Mustache-—à–∞–±–ª–æ–Ω–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç "–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å HTML ‚Üí Mustache"
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π HTML (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ–º–æ)
3. –í—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∂–∏–º:
   - Regex (–±—ã—Å—Ç—Ä–æ, –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö –ø–∏—Å–µ–º)
   - AI (–º–µ–¥–ª–µ–Ω–Ω–æ, –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä —Å —Ü–∏–∫–ª–∞–º–∏)

4. Frontend ‚Üí POST /template-generator
   {
     "html_content": "<html>...",
     "use_ai": false
   }

5. Backend (—Ä–µ–∂–∏–º Regex):
   ‚úì Regex –∑–∞–º–µ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç ‚Üí {{ text_1 }}, {{ text_2 }}
   ‚úì Regex –∑–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ ‚Üí {{ url_1 }}
   ‚úì Regex –∑–∞–º–µ–Ω—è–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Üí {{ image_1 }}
   ‚úì –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {template, variables}

   Backend (—Ä–µ–∂–∏–º AI):
   ‚úì –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTML –≤ Claude
   ‚úì Claude –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
   ‚úì –°–æ–∑–¥–∞—ë—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ + —Ü–∏–∫–ª—ã {{#speakers}}
   ‚úì –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç slots_schema
   ‚úì –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {html_layout, slots_schema, variables}

6. Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
   - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π HTML —Å–ª–µ–≤–∞
   - Mustache —à–∞–±–ª–æ–Ω —Å–ø—Ä–∞–≤–∞
   - –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–ø–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∏—Å—å–º–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç "–ß–µ—Ä–Ω–æ–≤–∏–∫–∏"
2. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ"
3. –í—ã–±–∏—Ä–∞–µ—Ç —à–∞–±–ª–æ–Ω (—Å Mustache –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏)
4. –í–≤–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å: "–ü–∏—Å—å–º–æ –ø—Ä–æ —Å–ø–∏–∫–µ—Ä–∞ –ò–≤–∞–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞"

5. Frontend ‚Üí POST /generate-drafts-v2
   {
     "template_id": 5,
     "user_prompt": "–ü–∏—Å—å–º–æ –ø—Ä–æ —Å–ø–∏–∫–µ—Ä–∞ –ò–≤–∞–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞"
   }

6. Backend:
   ‚úì SELECT html_layout, slots_schema, instructions FROM email_templates WHERE id=5
   ‚úì SELECT content FROM knowledge_store WHERE event_id=... AND content_type='program'
   ‚úì –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è Claude:
     - System: "–ó–∞–ø–æ–ª–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ —Å—Ö–µ–º–µ slots_schema"
     - User: instructions + –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π + "–ü–∏—Å—å–º–æ –ø—Ä–æ —Å–ø–∏–∫–µ—Ä–∞ –ò–≤–∞–Ω–∞"
   
   ‚úì Claude –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON:
     {
       "subject": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ –æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ HR —á–µ—Ä–µ–∑ AI",
       "intro_heading": "–ö–∞–∫ AI –º–µ–Ω—è–µ—Ç –ø–æ–¥—Ö–æ–¥ –∫ –ø–æ–¥–±–æ—Ä—É –ø–µ—Ä—Å–æ–Ω–∞–ª–∞",
       "intro_text": "...",
       "speakers": [
         {"name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", "topic": "AI-—Ä–µ–∫—Ä—É—Ç–∏–Ω–≥", "photo": "url"}
       ],
       "cta_text": "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è",
       "cta_url": "https://event.ru/register"
     }
   
   ‚úì –†–µ–Ω–¥–µ—Ä–∏—Ç —á–µ—Ä–µ–∑ chevron:
     final_html = chevron.render(html_layout, claude_variables)
   
   ‚úì INSERT INTO generated_emails (subject, html_body, status='draft')

7. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {draft_id: 123, subject: "...", html_preview: "..."}

8. Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–æ–≤—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫ –≤ —Å–ø–∏—Å–∫–µ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∏–ª–µ–π

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ –≤ —Å–ø–∏—Å–∫–µ
2. –ù–∞–∂–∏–º–∞–µ—Ç "–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏"

3. Frontend ‚Üí POST /style-validator
   {
     "draft_id": 123
   }

4. Backend:
   ‚úì SELECT html_body FROM generated_emails WHERE id=123
   ‚úì SELECT template_id, content_type_id FROM generated_emails WHERE id=123
   ‚úì SELECT html_layout FROM email_templates 
     WHERE content_type_id=... AND is_example=true LIMIT 1
   
   ‚úì –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–∞ HTML –≤ Claude:
     "–°—Ä–∞–≤–Ω–∏ —Å—Ç–∏–ª–∏ reference_html –∏ generated_html.
      –ò–≥–Ω–æ—Ä–∏—Ä—É–π —Ç–µ–∫—Å—Ç. –ü—Ä–æ–≤–µ—Ä—å: —Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã, –æ—Ç—Å—Ç—É–ø—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü."
   
   ‚úì Claude –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
     {
       "status": "passed",
       "notes": "–í—Å–µ —Å—Ç–∏–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç: —Ü–≤–µ—Ç–∞ (#AE32E3), —à—Ä–∏—Ñ—Ç—ã (Segoe UI), —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü."
     }
   
   ‚úì UPDATE generated_emails 
     SET validation_status='passed', validation_notes='...'
     WHERE id=123

5. Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∑–µ–ª—ë–Ω—É—é –≥–∞–ª–æ—á–∫—É ‚úÖ "–°—Ç–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã"
```

---

## üß† –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å Mustache –∏ AI

### –ü–æ—á–µ–º—É Mustache, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è?

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å —á–∏—Å—Ç—ã–º AI:**
```python
# AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ—Å—å HTML ‚Üí —Ä–∏—Å–∫ —Å–ª–æ–º–∞—Ç—å –≤—ë—Ä—Å—Ç–∫—É
ai_html = claude.generate("–°–æ–∑–¥–∞–π –ø–∏—Å—å–º–æ –ø—Ä–æ –ò–≤–∞–Ω–∞")
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å—Ç–∏–ª–∏, —Å–ª–æ–º–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –º—É—Å–æ—Ä
```

**‚úÖ –†–µ—à–µ–Ω–∏–µ: HTML + Mustache —Å–ª–æ—Ç—ã + AI –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**
```python
# –®–∞–±–ª–æ–Ω (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞):
html_layout = """
<table style="...—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏...">
  <tr><td>{{ intro_heading }}</td></tr>
  {{#speakers}}
    <tr><td>{{ name }} ‚Äî {{ topic }}</td></tr>
  {{/speakers}}
</table>
"""

# AI –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç HTML):
variables = claude.fill_variables({
  "intro_heading": "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
  "speakers": [{"name": "–ò–≤–∞–Ω", "topic": "AI"}]
})

# –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Mustache:
final_html = chevron.render(html_layout, variables)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –°—Ç–∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ slots_schema (JSONB –≤ –ë–î)

```json
{
  "subject": {
    "type": "string",
    "description": "–¢–µ–º–∞ –ø–∏—Å—å–º–∞"
  },
  "intro_heading": {
    "type": "string",
    "description": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è"
  },
  "intro_text": {
    "type": "string",
    "description": "–¢–µ–∫—Å—Ç –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è"
  },
  "speakers": {
    "type": "array",
    "description": "–°–ø–∏—Å–æ–∫ —Å–ø–∏–∫–µ—Ä–æ–≤ (2-4 —à—Ç—É–∫–∏)",
    "items": {
      "name": "string",
      "topic": "string",
      "photo": "string",
      "company": "string"
    }
  },
  "cta_text": {
    "type": "string",
    "description": "–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏"
  },
  "cta_url": {
    "type": "string",
    "description": "–°—Å—ã–ª–∫–∞ –∫–Ω–æ–ø–∫–∏"
  }
}
```

Claude –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç—É —Å—Ö–µ–º—É –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ –Ω–µ–π.

---

## üîç RAG (Retrieval-Augmented Generation)

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π

1. **–•—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π**: `knowledge_store` —Ç–∞–±–ª–∏—Ü–∞
   - –ü—Ä–æ–≥—Ä–∞–º–º–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (Google Sheets)
   - –ë–æ–ª–∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (Google Docs)
   - –ö–µ–π—Å—ã —Å–ø–∏–∫–µ—Ä–æ–≤ (manual_text)

2. **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è**: –∫–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π"
   - –í—ã–∑—ã–≤–∞–µ—Ç `/index-knowledge`
   - –ß–∏—Ç–∞–µ—Ç Google Docs, –æ–±–Ω–æ–≤–ª—è–µ—Ç `content`

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:
   ```python
   # –í email_templates.rag_sources:
   rag_sources = ["program", "pain_points"]
   
   # Backend –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç:
   program = SELECT content FROM knowledge_store 
             WHERE event_id=1 AND content_type='program'
   pains = SELECT content FROM knowledge_store 
           WHERE event_id=1 AND content_type='pain_points'
   
   # –ü—Ä–æ–º–ø—Ç –¥–ª—è Claude:
   f"""
   –ü–†–û–ì–†–ê–ú–ú–ê –ú–ï–†–û–ü–†–ò–Ø–¢–ò–Ø:
   {program[:20000]}
   
   –ë–û–õ–ò –ê–£–î–ò–¢–û–†–ò–ò:
   {pains[:20000]}
   
   –ó–∞–ø–æ–ª–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω–∞, –≤—ã–±—Ä–∞–≤ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.
   """
   ```

---

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ UniSender

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UniSender

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏**:
   - –ß–µ—Ä–Ω–æ–≤–∏–∫ (status=draft) ‚Üí –∫–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
   - –í—ã–∑–æ–≤ `/unisender-manager`:
     ```json
     {
       "action": "create_campaign",
       "draft_id": 123
     }
     ```
   - UniSender API —Å–æ–∑–¥–∞—ë—Ç –∫–∞–º–ø–∞–Ω–∏—é
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `unisender_campaign_id` –≤ `email_campaigns`

2. **–û—Ç–ø—Ä–∞–≤–∫–∞**:
   - UniSender —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –ø–æ —Å–ø–∏—Å–∫—É `unisender_list_id`
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å: `sent_at = NOW()`, `status = 'sent'`

3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**:
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ `/sync-events-unisender`
   - –û–±–Ω–æ–≤–ª—è–µ—Ç `email_stats`: opens_count, clicks_count
   - Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏ (Recharts)

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Google Docs Integration

**–§—É–Ω–∫—Ü–∏—è `read_google_doc(url, sheet_name=None)`:**
- –ü–∞—Ä—Å–∏—Ç Google Docs —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π API
- –î–ª—è Google Sheets: —á–∏—Ç–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ª–∏—Å—Ç (sheet_name)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫

**–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑ Google Sheets:**
```
–õ–∏—Å—Ç "Meta":
A           B
event_name  Human –ü–æ–¥–±–æ—Ä 2024
event_date  2024-05-15
cta_url     https://event.ru/register
```

–ü–∞—Ä—Å–∏—Ç—Å—è –∫–∞–∫: `{"event_name": "Human –ü–æ–¥–±–æ—Ä 2024", ...}`

### PostgreSQL Simple Query Protocol

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û**: –ë–∞–∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ Simple Query Protocol!

**‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```python
cursor.execute("SELECT * FROM events WHERE id = %s", (event_id,))
# –û—à–∏–±–∫–∞: Extended Query Protocol not supported
```

**‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:**
```python
cursor.execute(f"SELECT * FROM events WHERE id = {event_id}")
# Simple Query —Å –ø—Ä—è–º–æ–π –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π
```

**–î–ª—è —Å—Ç—Ä–æ–∫:**
```python
name = name.replace("'", "''")  # –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
cursor.execute(f"INSERT INTO events (name) VALUES ('{name}')")
```

### OpenRouter API

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**:
- `template-generator` (—Ä–µ–∂–∏–º AI)
- `generate-drafts-v2`
- `style-validator`

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```python
headers = {
    "Authorization": f"Bearer {OPENROUTER_API_KEY}",
    "Content-Type": "application/json"
}

data = {
    "model": "anthropic/claude-3.5-sonnet",
    "messages": [
        {"role": "system", "content": "–¢—ã ‚Äî email-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥..."},
        {"role": "user", "content": "–ó–∞–ø–æ–ª–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ..."}
    ],
    "temperature": 0.7,
    "max_tokens": 4000
}

response = requests.post(
    "https://openrouter.ai/api/v1/chat/completions",
    headers=headers,
    json=data
)
```

---

## üìù –ß–∞—Å—Ç—ã–µ –∫–µ–π—Å—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞?

1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è ‚Üí –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ‚Üí "–°–æ–∑–¥–∞—Ç—å"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ
3. –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞:
   - –í–∫–ª–∞–¥–∫–∞ "Email —à–∞–±–ª–æ–Ω—ã" ‚Üí "–°–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä"
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π HTML
   - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ Mustache (Regex –∏–ª–∏ AI)
4. –ù–∞–ø–∏—Å–∞—Ç—å `instructions` (–ø—Ä–æ–º–ø—Ç –¥–ª—è AI):
   ```
   –°–æ–∑–¥–∞–π –ø–∏—Å—å–º–æ —Ç–∏–ø–∞ "–ü—Ä–æ–¥–∞–∂–∞ —á–µ—Ä–µ–∑ –±–æ–ª—å".
   –í—ã–±–µ—Ä–∏ 1-2 –±–æ–ª–∏ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.
   –í—ã–±–µ—Ä–∏ 2-3 —Å–ø–∏–∫–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞—é—Ç —ç—Ç–∏ –±–æ–ª–∏.
   –¢–æ–Ω: –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –±–µ–∑ –∫–ª–∏—à–µ.
   ```

### –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π?

1. –î–æ–±–∞–≤–∏—Ç—å Google Docs URL –≤ "–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π"
2. –ù–∞–∂–∞—Ç—å "–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π"
3. Backend –ø—Ä–æ—á–∏—Ç–∞–µ—Ç Google Docs, –æ–±–Ω–æ–≤–∏—Ç `knowledge_store`

### –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–ª–æ–º–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –≤ —á–µ—Ä–Ω–æ–≤–∏–∫–µ?

1. –û—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ ‚Üí "–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏"
2. –ï—Å–ª–∏ `failed` ‚Üí —Å–º–æ—Ç—Ä–µ—Ç—å `validation_notes`
3. –ü—Ä–æ–±–ª–µ–º–∞ –æ–±—ã—á–Ω–æ –≤:
   - –≠—Ç–∞–ª–æ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω (`is_example=true`) —É—Å—Ç–∞—Ä–µ–ª ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å
   - AI —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –ª–∏—à–Ω–∏–µ —Å—Ç–∏–ª–∏ ‚Üí –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –ø—Ä–æ–º–ø—Ç `instructions`
   - HTML layout —Å–ª–æ–º–∞–Ω ‚Üí –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω —á–µ—Ä–µ–∑ `template-generator`

---

## üöÄ –†–∞–∑–≤–∏—Ç–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏

1. **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å HTML ‚Üí Mustache**:
   - ‚úÖ Regex —Ä–µ–∂–∏–º (–±—ã—Å—Ç—Ä–æ, –±–µ–∑ AI)
   - üîÑ AI —Ä–µ–∂–∏–º —Å —Ü–∏–∫–ª–∞–º–∏ `{{#speakers}}`
   - ‚è≥ –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è slots_schema
   - ‚è≥ –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ `text_1` ‚Üí `intro_heading`)

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∏—Å–µ–º**:
   - ‚úÖ RAG –∏–∑ knowledge_store
   - ‚úÖ Chevron —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
   - ‚è≥ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ `{{#events}}{{#speakers}}...{{/speakers}}{{/events}}`

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**:
   - ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π —á–µ—Ä–µ–∑ Claude
   - ‚è≥ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - ‚è≥ Diff-–ø—Ä–µ–≤—å—é (—á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ —Å—Ç–∏–ª—è—Ö)

### –ë—É–¥—É—â–∏–µ —Ñ–∏—á–∏

- **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: rules –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∏—Å–µ–º –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ UniSender (–∏–º—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞, –∫–æ–º–ø–∞–Ω–∏—è)
- **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Mustache –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://mustache.github.io/
- **Chevron (Python Mustache)**: https://github.com/noahmorrison/chevron
- **OpenRouter API**: https://openrouter.ai/docs
- **UniSender API**: https://www.unisender.com/ru/support/api/

---

–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2024-11-01